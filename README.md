<div align="center">

  # ê³¼ì œ 03 - GameDuo_Backend

</div>


## ëª©ì°¨
- [FíŒ€ ë©¤ë²„ ì†Œê°œ](#-team-f-member)  
- [ê°œë°œ ê¸°ê°„](#--ê°œë°œ-ê¸°ê°„--)  
- [í”„ë¡œì íŠ¸ ì„¤ëª… ë¶„ì„](#-í”„ë¡œì íŠ¸)
- [ê°œë°œ ì¡°ê±´](#-ê°œë°œ-ì¡°ê±´)
- [ì‹¤í–‰ë°©ë²•](#ì‹¤í–‰-ë°©ë²•)
- [ë°°í¬](#-ë°°í¬)
- [swagger](#swagger)  
- [í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤](#í…ŒìŠ¤íŠ¸-ì¼€ì´ìŠ¤)  
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ) 
<br><br>
<div align="center">

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ Team "F" member  

|                ì´ìŠ¹ë¯¼                 |                 ì„í˜                  |                 ì „ì¬ì™„                  |                 ì •ìš©ìˆ˜                 |
| :-----------------------------------: | :-----------------------------------: | :-------------------------------------: | :------------------------------------: |
| [Github](https://github.com/SMin1620) | [Github](https://github.com/Cat-Nile) | [Github](https://github.com/iamjaewhan) | [Github](https://github.com/blueknarr) |

  <br>

| <img height="200" width="380" src="https://retaintechnologies.com/wp-content/uploads/2020/04/Project-Management-Mantenimiento-1.jpg"> | <img height="200" width="330" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTGElLjafMUhHglmqwh9lRh_sVzOCQyBiPNfQ&usqp=CAU"> |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| ğŸ’» [**Team work**](https://www.notion.so/Team-F-3f553f413ee14b389da0641d8bb4d99e) | ğŸ“’ [**Project page**](https://www.notion.so/21776eb6eb77429b9c9b4e65509c6aa5) |
|        ê³µì§€ì‚¬í•­, ì»¨ë²¤ì…˜ ê³µìœ  ë“±<br> ìš°ë¦¬ íŒ€ì„ ìœ„í•œ ë£°        | ìš”êµ¬ì‚¬í•­ ë¶„ì„, ì •ë³´ ê³µìœ  ë°<br> ì›í• í•œ í”„ë¡œì íŠ¸ë¥¼ ìœ„í•´ ì‚¬ìš©  |
 <br>
  </div> 

  <h2> âŒ› ê°œë°œ ê¸°ê°„  </h2> 
 2022/07/11  ~ 2022/07/15
 <br><br>
  </div> 


# ğŸ’» í”„ë¡œì íŠ¸
  ### í”„ë¡œì íŠ¸ ì„¤ëª…
  - ë³´ìŠ¤ë ˆì´ë“œ PVE ì»¨í…ì¸  ê´€ë ¨ 6ê°€ì§€ ë¼ìš°í„°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. 
      - ìœ ì € ìƒì„±
      - ì¤‘ë³µë˜ì§€ ì•ŠëŠ” userId ìƒì„±
          - ìƒì„±ëœ userId ì‘ë‹µ
      - ìœ ì € ì¡°íšŒ
          - í•´ë‹¹ ìœ ì €ì˜ ë³´ìŠ¤ë ˆì´ë“œ ì´ ì ìˆ˜ì™€ ì°¸ì—¬ê¸°ë¡ ì‘ë‹µ
      - ë³´ìŠ¤ë ˆì´ë“œ ìƒíƒœ ì¡°íšŒ
          - ë³´ìŠ¤ë ˆì´ë“œ í˜„ì¬ ìƒíƒœ ì‘ë‹µ
              - canEnter: ì…ì¥ ê°€ëŠ¥ ì—¬ë¶€
              - enteredUserId: í˜„ì¬ ì§„í–‰ì¤‘ì¸ ìœ ì €ê°€ ìˆë‹¤ë©´, í•´ë‹¹ ìœ ì €ì˜ id
          - ì…ì¥ ê°€ëŠ¥ ì¡°ê±´: í•œë²ˆì— í•œëª…ì˜ ì¥¬ì €ë§Œ ë³´ìŠ¤ë ˆì´ë“œ ì§„í–‰, ë ˆì´ë“œ ì œí•œ ì‹œê°„ ê³ ë ¤
      - ë³´ìŠ¤ ë ˆì´ë“œ ì‹œì‘
          - ì¤‘ë³µë˜ì§€ ì•ŠëŠ” raidRecordIdë¥¼ ìƒì„± í›„ isEntered:true ì‘ë‹µ
          - ì‹œì‘ì´ ë¶ˆê°€ëŠ¥ í•˜ë‹¤ë©´ isEntered: false
      - ë³´ìŠ¤ë ˆì´ë“œ ì¢…ë£Œ
          - ë ˆì´ë“œ levelì— ë”°ë¥¸ score ë°˜ì˜
          - ìœ íš¨ì„± ê²€ì‚¬: userIdì™€ raidRecordIdê°€ ì¼ì¹˜í•˜ì§€ ì•Šë‹¤ë©´ ì˜ˆì™¸ ì²˜ë¦¬
          - ì‹œì‘í•œ ì‹œê°„ìœ¼ë¡œë¶€í„° ë ˆì´ë“œ ì œí•œ ì‹œê°„ì´ ì§€ë‚¬ë‹¤ë©´ ì˜ˆì™¸ì²˜ë¦¬
      - ë³´ìŠ¤ë ˆì´ë“œ ë­í‚¹ ì¡°íšŒ
<br>


  ### í”„ë¡œì íŠ¸ ë¶„ì„

  - Static Dataë¥¼ Redisì— ìºì‹±í•˜ì—¬ ì‚¬ìš©
  - ë³´ìŠ¤ë ˆì´ë“œ ì…ì¥ ì œí•œ ì‹œê°„ì— ë”°ë¼ ì¬ì…ì¥ ì²˜ë¦¬
  - ì €ì¥ëœ userIdì™€ raidRecordidId ì¼ì¹˜í•˜ì§€ ì•Šë‹¤ë©´ ì˜ˆì™¸ ì²˜ë¦¬
  - ë™ì‹œì„± ê³ ë ¤
      - ìœ ì €Aì™€ ìœ ì €Bê°€ ê°™ì€ ë³´ìŠ¤ë ˆì´ë“œì— ì…ì¥í–ˆì„ ë•Œ ì²˜ë¦¬
  -  ë­í‚¹ ë°ì´í„°ëŠ” ì›¹ ì„œë²„ì— ìºì‹± ë˜ëŠ” Redisì— ìºì‹±
  -  ë ˆì´ì–´ ê³„ì¸µ ë¶„ë¦¬
  -  ë°œìƒí•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ì˜ˆì™¸ ì²˜ë¦¬
<br>


  ###  íŒ¨í„´

  <img src="https://user-images.githubusercontent.com/44389424/179135015-a81898a1-e22f-4414-87db-bb264fd20772.jpg"/>
<br>


  ### ë°ì´í„° ë‹¤ì´ì–´ê·¸ë¨

  <img src="https://user-images.githubusercontent.com/44389424/179135022-8f1d76dd-b6ff-4328-bce7-5c0353e1365c.jpg"/>
<br>


### API ëª…ì„¸ì„œ

| ID   | URI                     | METHOD | ê¸°ëŠ¥                 |
| ---- | ----------------------- | ------ | -------------------- |
| 1    | /users/register             | POST   | ìœ ì € ìƒì„±            |
|2     | /users/login            |POST    | ë¡œê·¸ì¸      |
| 3   | /users/<int: user_id>    | GET    | ìœ ì € ì •ë³´ ì¡°íšŒ       |
| 4    | /bossRaid               | GET    | ë³´ìŠ¤ë ˆì´ë“œ ìƒíƒœ ì¡°íšŒ |
| 5    | /bossRaid/enter         | POST   | ë³´ìŠ¤ë ˆì´ë“œ ì‹œì‘      |
| 6    | /bossRaid/end           | PATCH  | ë³´ìŠ¤ë ˆì´ë“œ ì¢…ë£Œ      |
|7     | /bossRaid/\<int:game_id\>|GET    |ë³´ìŠ¤ë ˆì´ë“œ ì ‘ì†       |
| 8    | /bossRaid/topRankerList?user_id=\<int:user_id\> | GET    | ë­í‚¹ì¡°íšŒ             |
<details>
  <summary>1. ìœ ì € ìƒì„±</summary>
  
  ```
  [POST]
  users/register
  ```
  - Request
  ```
  {
  "username": "testuser",
  "password": "password@"
 }

  ```
  - Response
  ```
  SUCCESS {
  "username": "testuser"
}

  ```
</details>
<details>
  <summary>2. ë¡œê·¸ì¸</summary>
  
  ```
  [POST]
  /users/login
  ```
  - Request
  ```
  {
  "username": "testuser",
  "password": "password@"
}

  ```
  - Response
  ```
  SUCCESS {
  "username": "testuser"
}

  ```
</details>
<details>
  <summary>3. ìœ ì € ì •ë³´ ì¡°íšŒ</summary>
  
  ```
  [GET]
  /users/<int: user_id>
  ```
  - Response
  ```
  SUCCESS {
    "totalScore": 199,
    "bossRaidHistory": [
        {
            "id": 22,
            "score": 85,
            "enter_time": "2022-07-15T14:51:03.665203+09:00",
            "end_time": "2022-07-15T14:51:03.665203+09:00"
        },
        ...
    ]
}
  ```
</details>
<details>
  <summary>4. ë³´ìŠ¤ë ˆì´ë“œ ìƒíƒœ ì¡°íšŒ</summary>
  
  ```
  [GET]
  /bossRaid 
  ```
  - Response
  ```
  SUCCESS {
  "status": [
    {
      "bossRaidId": 1,
      "canEnter": false,
      "enteredUserId": 103
    }
  ]

  ```
</details>
<details>
  <summary>5. ë³´ìŠ¤ë ˆì´ë“œ ì‹œì‘</summary>
  
  ```
  [POST]
  /bossRaid/enter
  ```
  - Request
  ```
  ```
  - Response
  ```
  ```
</details>
<details>
  <summary>6. ë³´ìŠ¤ë ˆì´ë“œ ì¢…ë£Œ</summary>
  
  ```
  [PATCH]
  /bossRaid/end
  ```
  - Request
  ```
  ```
  - Response
  ```
  ```
</details>
<details>
  <summary>7. ë³´ìŠ¤ë ˆì´ë“œ ì ‘ì†</summary>
  
  ```
  [GET]
  /bossRaid/\<int:game_id\>
  ```
  - Response
  ```
  SUCCESS {
  "Boss Raid": {
    "id": 1,
    "name": "ë‹ŒìëŒ€ì „"
  }
}

  ```
</details>
<details>
  <summary>8. ë­í‚¹ ì¡°íšŒ</summary>
  
  ```
  [GET]
  /bossRaid/topRankerList?user_id=\<int:user_id\>
  ```
  - Response
  ```
  SUCCESS {
    "topRankerInfoList": [
        {
            "ranking": 1,
            "userId": 21,
            "totalScore": 217
        },
        {
            "ranking": 2,
            "userId": 1,
            "totalScore": 199
        },
        {
            "ranking": 3,
            "userId": 45,
            "totalScore": 190
        },
        ...
    ],
    "myRankingInfo": {
        "ranking": 33,
        "userId": 3,
        "totalScore": 0
    }
}
  ```
</details>
<br><br>

### ERD

<img src="https://user-images.githubusercontent.com/44389424/178653804-f23aedb0-85ec-4fe5-8ec8-075227eb0ecb.JPG"/>
<details>
<summary>Users: íšŒì› ì •ë³´</summary>

  | í•„ë“œëª…    | íƒ€ì…   | ë¹„ê³  |
  | --------- | ------ | ---- |
  | id        | Int    | PK   |
  | user_name | String |      |
  | password  | String |      |
</details>

<details>
<summary>Total Score: ë³´ìŠ¤ë ˆì´ë“œì—ì„œ ì–»ì€ ìœ ì € ë³„ ì´ ì ìˆ˜</summary>

  | í•„ë“œëª…      | íƒ€ì… | ë¹„ê³                    |
  | ----------- | ---- | ---------------------- |
  | id          | Int  | PK                     |
  | user_id     | Int  | Foreign Key (users:id) |
  | total_score | Int  |                        |
</details>
  
<details>
<summary>BossRaid: ë³´ìŠ¤ë ˆì´ë“œ</summary>

  | í•„ë“œëª…     | íƒ€ì…    | ë¹„ê³  |
  | ---------- | ------- | ---- |
  | id         | Int     | PK   |
  | is_entered | Boolean |      |
</details>

<details>
<summary>BossRaidHistory: ë³´ìŠ¤ë ˆì´ë“œ ì‹œì‘ ë° ì¢…ë£Œ ê¸°ë¡</summary>

  | í•„ë“œëª…      | íƒ€ì…     | ë¹„ê³                       |
  | ----------- | -------- | ------------------------- |
  | id          | Int      | PK                        |
  | user_id     | Int      | Foreign Key (users:id)    |
  | bossraid_id | Int      | Foreign Key (bossraid:id) |
  | level       | Int      |                           |
  | score       | Int      |                           |
  | enter_time  | Datetime |                           |
  | end_time    | Datetime |                           |
</details>
  
<details>
<summary>BossRaidStatus: ë³´ìŠ¤ë ˆì´ë“œ ìƒíƒœ</summary>

  | í•„ë“œëª…         | íƒ€ì…     | ë¹„ê³                       |
  | -------------- | -------- | ------------------------- |
  | id             | Int      | PK                        |
  | user_id        | Int      | Foreign Key (users:id)    |
  | bossraid_id    | Int      | Foreign Key (bossraid:id) |
  | level          | Int      |                           |
  | last_entertime | Datetime |                           |
</details>
<br><br>
</div>



  ### ğŸš¥ ê°œë°œ ì¡°ê±´ 

  #### ğŸ™†â€â™‚ï¸ í•„ìˆ˜ì‚¬í•­  
    - Python, Django
    - Static Data Redis ìºì‹±
    - ë™ì‹œì„± ê³ ë ¤
    - ë ˆì´ì–´ ê³„ì¸µ ë¶„ë¦¬
  #### ğŸ”¥ ì„ íƒì‚¬í•­
    - Docker
    - Unit test codes  
    - REST API Documentation (Swagger UI)  



## ì‹¤í–‰ ë°©ë²•

```
ğŸ“Œ Dependency

# ë¡œì»¬ì—ì„œ ë°”ë¡œ ì„œë²„ êµ¬ë™
pip install -r requirements.txt
python manage.py makemigrations
python manage.py migrate
python manage.py runserver

# ë„ì»¤ ì‹¤í–‰ (prod branch)
pip install docker
pip install docker-compose
docker-compose up -d

(ì¥ê³  ì„œë²„ëŠ” 15ì´ˆ ëŒ€ê¸° ì‹œê°„ì„ ê±¸ì—ˆìŠµë‹ˆë‹¤.)
```



## ğŸ”¥ ë°°í¬

dockerë¥¼ ì´ìš©í•´ í”„ë¡œì íŠ¸ apië¥¼ ì»¨í…Œì´ë„ˆí™” í•˜ì—¬ GCPì— ë°°í¬í–ˆìŠµë‹ˆë‹¤  

[API Link]()

GCP ë°°í¬, í…ŒìŠ¤íŠ¸ ë° ë™ì‘ì„ í™•ì¸í•˜ì˜€ìœ¼ë©°, ë¹„ìš© ë“±ì˜ ì´ìœ ë¡œ í˜„ì¬ëŠ” ì ‘ì†ë¶ˆê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br><br>



## swagger

[API ëª…ì„¸ì„œ (Swagger)]()

<br><br>



## ê¸°ìˆ  ìŠ¤íƒ

> - Back-End :  <img src="https://img.shields.io/badge/Python 3.10-3776AB?style=flat&logo=Python&logoColor=white"/>&nbsp;<img src="https://img.shields.io/badge/Django 4.0.4-092E20?style=flat&logo=Django&logoColor=white"/>&nbsp;<img src="https://img.shields.io/badge/Django-DRF 3.13.1-009287?style=flat&logo=Django&logoColor=white"/>&nbsp;<img src="https://img.shields.io/badge/Docker 20.10.14-2496ED?style=flat&logo=docker&logoColor=white"/>&nbsp;<img src="https://img.shields.io/badge/redis-%23DD0031.svg?style=for-the-badge&logo=redis&logoColor=white"/>&nbsp;<img src="https://img.shields.io/badge/Nginx-009639?style=flat&logo=Nginx&logoColor=white"/>
>
> - ETCã€€ã€€ã€€:  <img src="https://img.shields.io/badge/Git-F05032?style=flat-badge&logo=Git&logoColor=white"/>&nbsp;<img src="https://img.shields.io/badge/Github-181717?style=flat-badge&logo=Github&logoColor=white"/>&nbsp;<img src="https://img.shields.io/badge/Swagger-FF6C37?style=flat-badge&logo=Swagger&logoColor=white"/>&nbsp;<img src="https://img.shields.io/badge/GoogleCloud-%234285F4.svg?style=for-the-badge&logo=google-cloud&logoColor=white"/>
